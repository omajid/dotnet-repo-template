language: csharp
mono: none
dotnet: 5.0

env:
  global:
    # $ gem install travis
    # If you are using travis-ci.com instead of travis-ci.org, you need to login first: travis login --pro
    # $ travis encrypt NuGetApiKey="deadbeef-3e0e-11eb-81d8-7000c23bcef2" --add
    secure: vC9QTxXicRgN3ij5n5qjq7RntLjQ9dy3JjwYBi/rtcublwnaA2OryLYG+s4sXGSlyk9tBdsWg8kt+VEqiF1cDQy76iYpTSd06CZ/EJqrqrwYTiGHi7kAbZCrRVjwDnYsjHNlzEY9P8Te1YPtdaIabJN7TAQT+amcH047nw9eNZEQWhrsso7quE+C2GAJaz3ANtdpcdHGIdfrEJ636hRRVd3H9ZYnVUO8eqXds6v6t/jhCvLBRbB/bFSk0RRC50JwUJpBdM14pH16pYfSZwKV+rtodUnSzga5LY+dFUoQj2ymDMkNiaOAopNy0OB+E45BXNGPBahBihkRlgs87KazVkWbdsM6ctBqBF97tiwA8joo/0mSJuzBwYEQLLxXx5n8BHzUpBhU+h3R2BWm1WsOD786/j4Cj92w30bpj6RpDyVRaNPL69hJRSD+7+2j/N/FoJHrUFNe20b+BYr5dwCFMHPO4INGjqQsP7zUmPtpAAMNeINJ4zh3Ee62j2siI6Vz7ZJL24su4VrHXb5hZWqwMF0RNgDvOzB0P5ZuI9usv6Le/EydJkhr+zH9kBlSPsxujWcpt6+OaUPm8DIO89hzA48As+jJf4tBmrgwuNLb7av/ZuxI9Hp7ifQzArWB3yFkIW25mwthX6hysV1k9ch9yirmHDtkdUj/qE2yl9DUcwk=

script:
  - dotnet test
  - dotnet build

deploy:
  - provider: script
    edge: true
    script: dotnet msbuild -t:PushPackages
    on:
      all_branches: true
      condition: $TRAVIS_BRANCH == "main" || -n $TRAVIS_TAG
  - provider: releases
    edge: true
    file: artifacts/packages/Release/*.nupkg
    token:
      # Create 'Personal access token' with 'pubic_repo' scope
      # travis encrypt deadbeef7000c23bcef2
       secure: "dZHeDtuXM9OmmXJe8uLXa1WdW0hbtq8hCIRRlJn+l2nYjkX3/MYErquwm8b2OLiyf22u0Idst4LfYqq4WkUEKlO9J7RJGSxBYGFieU/rN0dXl0GJo7N+2lc/MsOmthutWQn9fsPuXfjo+A0pR7GQw8ZNJ5S9gvRgQmWRSRPn2t39RyMtHy7Pzc9GpHMB+h9tjTfmtZZ5/A9eDBkP366APEcOvQ2e2vQZwVhiXaaClcT/ScomVW5ouT6WZ2cy2/6O3z4RNOvEbYc0xAt1DMez7N2HmPc+uEyDN29jNJfKsFcWZVz2EZJNPZm0TlsjqlNe5TRvExFisvQHMhI3xck4UNRH6xK8ihmC7b8Dk9Ps+tzyrCi3S2dI0vCLuzIYqG1w7vroGBnbYjMhKDvCfGeuPmIhpDC8TKQL65Ok1neIL4GQRdwSvqZQduBjxVwLwMlp8xOP2Xb1CK3Mb1bQbO5L/v6v7TepA544z0f8dlT6/fVreg1ApGyRM4ucaKSNUhxMVuCtEfa4Um7HNxOKffbTaNbkS/1Ya+YZrSAuZkSAKTvfwH2QofAhIKLgk/0ymgm1/ZtPEFnRfJjk/yaGJiDQ3nqWTRhxjj/EtRP2A36FgetFSzCwu0Oi9JPnnvvXEMygkekEuizrFggNeYM33FmbagkaHzxwurZ1fWVntPbbFlM="
    draft: true
    on:
      tags: true
